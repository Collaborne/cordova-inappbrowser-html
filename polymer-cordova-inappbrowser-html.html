<link rel="import" href="../polymer/polymer.html">

<dom-module id="polymer-cordova-inappbrowser-html">
</dom-module>

<script>

(function() {

	Polymer({
		is: 'polymer-cordova-inappbrowser-html',
		properties: {
			html: {
				type: String,
				value: '',
				observer: '_refreshHtml'
			}
		},

		listeners: {
			'tap': '_onTap',
		},

		ready: function() {
			this.innerHTML = this.html;
		},

		// Private methods
		_refreshHtml: function() {
			this.innerHTML = this.html;
		},
		_onTap: function(e) {
			// External links need to be opened in the InAppBrowser. This avoids in native Cordova apps that the WebView replaces the app with the content of the external link.
			var href = Polymer.dom(e).rootTarget.getAttribute('href');
			if (typeof href === 'string' && !href.startsWith("#")) {
				// Open in InAppBrowser
				// @see https://github.com/apache/cordova-plugin-inappbrowser
				window.open(href, "_blank", "location=yes,EnableViewPortScale=yes");
			
				// Don't change the WebView additional 
				e.preventDefault();
			}
		},
	});

})();

</script>
